<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Now is your chance to help tackle coronavirus! #EUvsVirus">

    <!-- Meta tags for social media -->
    <meta property="og:title" content="Pan-European Hackathon">
    <meta property="og:description" content="Now is your chance to help tackle coronavirus! #EUvsVirus">
    <meta property="og:image" content="https://euvsvirus.org/assets/img/banner/Pan-EUHackathon-Thumbnail.jpg">
    <meta property="og:url" content="https://euvsvirus.org">
    <meta property="og:type" content="website">



    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Pan-European Hackathon">
    <meta name="twitter:description" content="Now is your chance to help tackle coronavirus! #EUvsVirus">
    <meta name="twitter:image" content="https://euvsvirus.org/assets/img/banner/Pan-EUHackathon-Thumbnail.jpg">


    <title>Pan-European Hackathon</title>

    <link rel="icon" type="image/png" href="../assets/img/favicon.png">
    <link rel="stylesheet" type="text/css" href="./../styles/styles-022.css">
    <style>
        input[type=text],
        select,
        textarea {
            box-sizing: border-box;
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }

        .status-input-form {
            box-sizing: border-box;
            margin-top: 20px;
        }

        .col-25 {
            box-sizing: border-box;
            float: left;
            width: 25%;
            margin-top: 6px;
        }

        .col-75 {
            box-sizing: border-box;
            float: left;
            width: 75%;
            margin-top: 6px;
        }

        .clearfix:after {
            content: ".";
            clear: both;
            display: block;
            visibility: hidden;
            height: 0px;
        }

        button {
            box-sizing: border-box;
            width: 100%;
            background-color: white;
            border: 2px solid var(--color-primary-blue);
            color: var(--color-primary-blue);
            padding: 11px 20px;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }

        button:hover {
            background-color: var(--color-primary-blue);
            color: white;
        }

        .hide {
            display: none;
        }

        .status-result {
            box-sizing: border-box;
        }

        .loader {
            border: 16px solid #f3f3f3;
            /* Light grey */
            border-top: 16px solid var(--color-primary-blue);
            /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 2s linear infinite;
            margin: auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .result {
            box-sizing: border-box;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .description {
            box-sizing: border-box;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .statistics-wrapper {
            box-sizing: border-box;
            margin-top: 20px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body style="background-color: #F4F4F4">

    <!-- BEGIN mobile menu -->
    <div id="mobileNav" class="overlay">
        <section id="navbar-mobile">
            <div class="navbar container">
                <a href="./../"><img alt="EU versus virus hashtag" src="./../assets/img/navbar/EUvsVirus.svg"></a>
                <div>
                    <span class="toggle-mobile-menu-icon close" onclick="closeNav()">&times;</span>
                </div>
            </div>
        </section>
        <div class="overlay-content container">
            <div>
                <a href="./../" class="mobile-link-item menu-hackathon">Hackathon</a>
                <a href="./../results/" class="mobile-link-item menu-item menu-results">Results</a>
                <a href="./../challenges/" class="mobile-link-item menu-item menu-challenges">Challenges</a>
                <a href="./../nextsteps/" class="mobile-link-item menu-item menu-nextsteps">What's Next</a>
                <a href="./../faq/" class="mobile-link-item menu-item menu-faq">FAQ</a>

                <!-- About -->
                <ul class="mobile-menu-sub">
                    <li>
                        <a href="./../ambassadors/" class="mobile-link-item menu-item menu-ambassadors">Ambassadors</a>
                    </li>
                    <li>
                        <a href="./../partners/" class="mobile-link-item menu-item menu-partners">Partners</a>
                    </li>
                    <li>
                        <a href="./../team/" class="mobile-link-item menu-item menu-team">Team</a>
                    </li>
                </ul>

                <a href="./../press/" class="mobile-link-item menu-item menu-press">Press</a>
            </div>
            <div class="d-flex mb-4">
                <a href="https://twitter.com/EUvsVirus" target="_blank" rel="noreferrer">
                    <img class="navbar-logo-mobile" alt="Logo Twitter" src="./../assets/img/navbar/twitter.png">
                </a>
                <a href="https://www.facebook.com/EuropeanCommission/" target="_blank" rel="noreferrer">
                    <img class="navbar-logo-mobile" alt="Logo Facebook" src="./../assets/img/navbar/facebook.png">
                </a>
                <a href="https://www.instagram.com/EUvsVirus/" target="_blank" rel="noreferrer">
                    <img class="navbar-logo-mobile" alt="Logo Instagram" src="./../assets/img/navbar/instagram.png">
                </a>
                <a href="https://www.linkedin.com/company/european-commission/" target="_blank" rel="noreferrer">
                    <img class="navbar-logo-mobile" alt="Logo LinkedIn" src="./../assets/img/navbar/linkedin.png">
                </a>
            </div>
        </div>
    </div>
    <!-- END mobile menu -->


    <!-- BEGIN navbar desktop -->
    <section id="navbar-desktop">
        <div class="navbar container">
            <a href="./../"><img alt="EU versus virus hashtag" src="./../assets/img/navbar/EUvsVirus.svg"></a>
            <div id="menu-mobile-burger">
                <span class="toggle-mobile-menu-icon open" onclick="openNav()">&#9776;</span>
            </div>
            <nav id="menu-desktop-content">
                <div class="d-flex">
                    <ul>
                        <li>
                            <a href="./../"
                                class="desktop-link-item menu-item menu-hackathon current-menu">Hackathon</a>
                        </li>
                        <li>
                            <a href="./../results/" class="desktop-link-item menu-results menu-item">Results</a>
                        </li>
                        <li>
                            <a href="./../challenges/"
                                class="desktop-link-item menu-challenges menu-item">Challenges</a>
                        </li>
                        <li>
                            <a href="./../nextsteps/" class="desktop-link-item menu-nextsteps menu-item">What's Next</a>
                        </li>
                        <li>
                            <a href="./../faq/" class="desktop-link-item menu-item menu-faq">FAQ</a>
                        </li>

                        <li class="dd">
                            <a id="about-menu-opener" style="cursor:pointer;" onclick="">About</a>
                            <!-- First Tier Drop Down -->
                            <ul>
                                <li><a class="dd-item menu-ambassadors" href="./../ambassadors/">Ambassadors</a></li>
                                <li><a class="dd-item menu-partners" href="./../partners/">Partners</a></li>
                                <li><a class="dd-item menu-team" href="./../team/">Team</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="./../press/" class="desktop-link-item menu-item menu-press">Press</a>
                        </li>
                    </ul>
                </div>
                <div class="navbar-btn-spacing"></div>
                <div class="d-flex align-items-center ">
                    <a class="" href="./../results/">
                        <div class="primary-button btn-rounded">
                            See results
                        </div>
                    </a>
                </div>
            </nav>
        </div>
    </section>
    <!-- END navbar desktop -->


    <!-- BEGIN status -->
    <section id="statistics" class="statistics main-wrapper pb-4">
        <div class="container">
            <h1>Statistics</h1>
            <div class="h1-seperator"></div>

            <div class="description">
                Here you see statistics about the registrations (updated every ~10 minutes).
            </div>

            <div class="statistics-wrapper">
                <h2>Countries</h2>
                <canvas id="countryChart"></canvas>
            </div>

            <div class="statistics-wrapper">
                <h2>Countries relative</h2>
                <canvas id="countryRelativeChart"></canvas>
            </div>

            <div class="statistics-wrapper">
                <h2>Domains</h2>
                <canvas id="domainChart"></canvas>
            </div>

            <div class="statistics-wrapper">
                <h2>Challenges</h2>
                <canvas id="challengeChart"></canvas>
            </div>

        </div>
    </section>
    <!-- END status -->

    <section class="vertical-spacing"></section>

    <!-- BEGIN footer -->
    <footer class="mt-3 pt-1">
        <div class="container d-flex space-between">
            <div class="footer-left d-flex">
                <img class="footer-hashtag" alt="EU versus virus hashtag"
                    src="../assets/img/footer/EUvsVirus-footer.svg">
                <ul>
                    <li>
                        <a href="./../terms/" hreflang="en">
                            Terms & Conditions
                        </a>
                    </li>
                    <li>
                        <a href="./../privacy/" hreflang="en">
                            Privacy Policy
                        </a>
                    </li>
                    <li>
                        <a href="./../imprint/" hreflang="en">
                            Imprint
                        </a>
                    </li>
                    <li>
                        <a href="./../assets/docs/EuvsVirus Values and Code Of Conduct.pdf" hreflang="en">
                            Code of Conduct
                        </a>
                    </li>
                    <li>
                        <a href="mailto:RTD-PAN-EUROPEAN-COVID-HACKATHON@ec.europa.eu" hreflang="en">
                            Contact
                        </a>
                    </li>
                </ul>
            </div>
            <div class="d-flex align-items-center d-none-mobile">
                <div class="d-flex align-items-center">

                    <a href="https://twitter.com/EUvsVirus" target="_blank" rel="noreferrer">
                        <img class="navbar-logo" alt="Logo Twitter" src="../assets/img/navbar/twitter.png">
                    </a>
                    <a href="https://www.facebook.com/EUvsVirus/" target="_blank" rel="noreferrer">
                        <img class="navbar-logo" alt="Logo Facebook" src="../assets/img/navbar/facebook.png">
                    </a>
                    <a href="https://www.instagram.com/EUvsVirus/" target="_blank" rel="noreferrer">
                        <img class="navbar-logo" alt="Logo Instagram" src="./../assets/img/navbar/instagram.png">
                    </a>
                    <a href="https://www.linkedin.com/company/euvsvirus/" target="_blank" rel="noreferrer">
                        <img class="navbar-logo" alt="Logo LinkedIn" src="../assets/img/navbar/linkedin.png">
                    </a>
                    <div style="width: 20px;"></div>
                    <a href="https://www.facebook.com/events/249707376073847" target="_blank" rel="noreferrer">
                        <img class="navbar-logo" alt="Logo LinkedIn" src="../assets/img/footer/fbevent.png">
                    </a>
                </div>
            </div>
    </footer>
    <!-- END footer -->

    <script src="countries.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"
        integrity="sha256-4iQZ6BVL4qNKlQ27TExEhBN1HFPvAvAMbFavKKosSWQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"
        integrity="sha256-VeNaFBVDhoX3H+gJ37DpT/nTuZTdjYro9yBruHjVmoQ=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="./../assets/js/global-023.js"></script>
    <script src="./../assets/js/cookieconsent-017.min.js"></script>
    <script>
        var countryUrl = "https://prod-115.westeurope.logic.azure.com:443/workflows/247874e5189a4cedb80f2503007782f9/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=2aMHmFwLZAc7gzEWhxCZIhRgxrXO_D9H7_2wDaF4n44";
        var challengeUrl = "https://prod-123.westeurope.logic.azure.com:443/workflows/596303616d7d44f6a218f46789f374b9/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=muqj-i8lGbsWtxxZMtBS7rjPqpdyT2kCpVUI8_6v7fA";
        var timeUrl = "https://prod-81.westeurope.logic.azure.com:443/workflows/fb7f8666db5c421da8b39dffabfc1e57/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=i1y8st0Bw864tqGrCuIqZF_Kxtuag0ovHD20YA15U8Y"
        var domainUrl = "https://prod-60.westeurope.logic.azure.com:443/workflows/bdee150720b14e0c856010af1d86d94f/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=1zTsPERGWTakN2SIzMwX9CwfyPBPorI_buRXYE4P5es"
        var elemCount = 30;

        var aspectRatio = window.innerHeight > window.innerWidth ? 1 : 2;
        function getRandomColor() {
            var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        $('document').ready(function () {
            $.ajax({
                url: countryUrl,
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8"
            }).done(function (data) {
                _.each(data, function (elem) { elem.Count = parseInt(elem.Count); });
                var sum = _.sumBy(data, function (elem) { return elem.Count; });
                var sortedData = _.sortBy(data, function (elem) { return elem.Count * -1; });
                var viewData = _.reduce(sortedData, function (aggr, elem, index) {
                    if (index < elemCount) {
                        return _.concat(aggr, elem);
                    } else {
                        aggr[elemCount] = {
                            "Country": "Rest",
                            "Count": (!!aggr[elemCount] ? aggr[elemCount].Count : 0) + elem.Count
                        };
                        return aggr;
                    }
                }, []);
                var ctx = document.getElementById('countryChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: _.map(viewData, function (elem) { return elem.Country; }),
                        datasets: [{
                            label: '# of registrations',
                            backgroundColor: _.map(viewData, function (elem) { return getRandomColor(); }),
                            data: _.map(viewData, function (elem) { return elem.Count; })
                        }]
                    },

                    // Configuration options go here
                    options: {
                        responsive: true,
                        aspectRatio: aspectRatio,
                        title: {
                            display: true,
                            text: 'Distribution for ' + sum + ' registrations who selected a country'
                        }
                    }
                });

                var countryLookup = _.reduce(countries, function (aggr, elem) {
                    if (!!elem) {
                        aggr[elem.Country] = elem.PopulationThousands;
                    } else {
                        console.log(elem);
                    }
                    return aggr;
                }, {});
                var relativeData = _.map(data, function (elem) {
                    if (elem.Country in countryLookup) {
                        return {
                            "Country": elem.Country,
                            "Count": elem.Count / (countryLookup[elem.Country] / 1000)
                        };
                    } else {
                        console.log('No country found: ' + elem.Country);
                        return {};
                    }
                });
                var filtered = _.filter(relativeData, function (elem) { return !!elem; });
                var sortedDataCountries = _.sortBy(filtered, function (elem) { return elem.Count * -1; });
                var viewDataCountries = _.reduce(sortedDataCountries, function (aggr, elem, index) {
                    if (index < elemCount) {
                        return _.concat(aggr, elem);
                    }
                    return aggr;
                }, []);
                var ctx = document.getElementById('countryRelativeChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: _.map(viewDataCountries, function (elem) { return elem.Country; }),
                        datasets: [{
                            label: '# of registrations',
                            backgroundColor: _.map(viewDataCountries, function (elem) { return getRandomColor(); }),
                            data: _.map(viewDataCountries, function (elem) { return elem.Count.toPrecision(3); })
                        }]
                    },

                    // Configuration options go here
                    options: {
                        responsive: true,
                        aspectRatio: aspectRatio,
                        title: {
                            display: true,
                            text: 'Registrations per milion inhabitants'
                        }
                    }
                });
            }).fail(function (jqXHR, status) {
                alert("Data fetch failed");
            });

            $.ajax({
                url: challengeUrl,
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8"
            }).done(function (data) {
                _.each(data, function (elem) { elem.Count = parseInt(elem.Count); });
                var sum = _.sumBy(data, function (elem) { return elem.Count; });
                data = _.sortBy(data, function (elem) { return elem.Count * -1; });
                data = _.reduce(data, function (aggr, elem, index) {
                    if (index < elemCount) {
                        return _.concat(aggr, elem);
                    } else {
                        aggr[elemCount] = {
                            "Challenge": "Rest",
                            "Count": (!!aggr[elemCount] ? aggr[elemCount].Count : 0) + elem.Count
                        };
                        return aggr;
                    }
                }, []);
                var ctx = document.getElementById('challengeChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: _.map(data, function (elem) { return elem.Challenge; }),
                        datasets: [{
                            label: '# of registrations',
                            backgroundColor: _.map(data, function (elem) { return getRandomColor(); }),
                            data: _.map(data, function (elem) { return elem.Count; })
                        }]
                    },

                    // Configuration options go here
                    options: {
                        responsive: true,
                        aspectRatio: aspectRatio,
                        title: {
                            display: true,
                            text: 'Distribution for all ' + sum + ' registrations'
                        }
                    }
                });
            }).fail(function (jqXHR, status) {
                alert("Data fetch failed");
            });

            $.ajax({
                url: domainUrl,
                type: "POST",
                dataType: "json",
                contentType: "application/json; charset=utf-8"
            }).done(function (data) {
                _.each(data, function (elem) { elem.Count = parseInt(elem.Count); });
                var sum = _.sumBy(data, function (elem) { return elem.Count; });
                data = _.sortBy(data, function (elem) { return elem.Count * -1; });
                data = _.reduce(data, function (aggr, elem, index) {
                    if (index < elemCount) {
                        return _.concat(aggr, elem);
                    } else {
                        aggr[elemCount] = {
                            "Domain": "Rest",
                            "Count": (!!aggr[elemCount] ? aggr[elemCount].Count : 0) + elem.Count
                        };
                        return aggr;
                    }
                }, []);
                var ctx = document.getElementById('domainChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: _.map(data, function (elem) { return elem.Domain; }),
                        datasets: [{
                            label: '# of registrations',
                            backgroundColor: _.map(data, function (elem) { return getRandomColor(); }),
                            data: _.map(data, function (elem) { return elem.Count; })
                        }]
                    },

                    // Configuration options go here
                    options: {
                        responsive: true,
                        aspectRatio: aspectRatio,
                        title: {
                            display: true,
                            text: 'Distribution for all ' + sum + ' registrations'
                        }
                    }
                });
            }).fail(function (jqXHR, status) {
                alert("Data fetch failed");
            });

        });


    </script>
</body>

</html>